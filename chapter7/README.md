# 第2部 ループとロジックの単純化

## 7章　制御フローを読みやすくする

### 7.1 条件式の引数の並び順

- 比較を書くときには、あまり変化しない・安定した値を右側に配置したほうが読みやすい

p.84の読みやすい例

```
if (length >= 10)
```

```
while (bytes_received < bytes_expected)
```

- 他にもテストのアサーションとかも同じ話

```
$this->assertSame($actual, $expected);
```

- [余談]スターウォーズがわからない（ヨーダ記法の話）

### 7.2 if/elseブロックの並び順

- ポイント
    - 条件は否定系よりも肯定系を使う。
    - 単純な条件を先に書く。
    - 関心を引く条件や、目立つ条件を先に書く。

- ※この優劣は衝突することもある。状況により判断基準は変わる。
- **でも、優先度は明確に決まる事が多い。**

#### 雑談トピックス

- 優劣が衝突することはありそう。
- これ単体でどうというより、後述のポイントとあわせて大事になってくる話かと思った

### 7.3 三項演算子

- 行数を短くするよりも、他の人が理解するのにかかる時間を短くする。
- 基本的にはif/elseを使う。三項演算子は簡潔になるとににだけ使う。

### 7.4 do/whileループを避ける

- do-statementはエラーや混乱の原因になることが多い（中略）私は条件が前もって書かれている方が好きだ。by C++の作者

#### 雑談トピックス

- do文、、本文の例みたいなのも見たことないので なんとも。
- むしろdo文が素晴らしいケースってどんななんだろうか？

### 7.5 関数から早く返す

- 早期リターンは素敵

#### 雑談トピックス

- クリーンアップコード
- ガード節

### 7.6 悪名高きgoto

#### 雑談トピックス

- 普段phpしか書かないのですが、goto的な禁止命令ってほかの言語でもあるんですかね？

### 7.7 ネストを浅くする

#### ネストが増える仕組み

- user_result/permission_resultを判定する例
    - 最も簡単にコードを挿入できる場所にコードを追加した。
    - 変更の「差分」は何も間違っていない。
    - **でも、こうした文脈は、あとで誰かがコードを見たときにはすべて失われてしまう。**
    - →【鍵となる考え】変更するときにはコードを新鮮な目で見る。一歩下がって全体を見る。

#### 雑談トピックス

- 例）chapter3のアレなコード（おもいだした

#### 早めに返してネストを削除する

- 早期リターンは素敵（ネストを浅くすることもできるよ）
    - 7.5関数からはやく返す(p.91)

#### ループ内部のネストを削除する

- continueを使う例
    - gotoと同じようにループを行き来するため、わかりにくくなることがある

#### 雑談トピックス

- continue,特定条件の場合には処理をスキップのような時には使うよ。

### 7.8 実行の流れを追えるかい？

- コードを「舞台裏」で実行する構成要素(スレッド、割り込みハンドラ、例外、、)について

### 7.9 まとめ

- コードの制御フローを読みやすくするために君ができることはいくつもある
